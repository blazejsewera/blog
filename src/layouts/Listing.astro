---
import type { ArticleInfo } from '../components/article/articleInfo'
import { cx } from '../components/util/classes'
import { Card } from '../components/article/Card'
import { Metadata } from '../components/article/Metadata'
import {
  defaultAuthor,
  defaultLanguage,
  defaultLicense,
  siteName,
} from '../components/const/meta'
import TitleSection from '../components/TitleSection.astro'

export interface Props {
  title: string
  description: string
  imgUrl: string
  imgDescription: string
  articles: ArticleInfo[]
}

const { title, description, imgUrl, imgDescription, articles } = Astro.props
const generatedDate = new Date().toISOString()
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="generator" content={Astro.generator} />
    <Metadata
      {...{
        title,
        date: generatedDate,
        author: defaultAuthor,
        language: defaultLanguage,
        license: defaultLicense,
        abstract: description,
        imgUrl,
        imgDescription,
        siteName
      }}
    />
    <title>{title}</title>
  </head>
  <body>
    <TitleSection title={title} imgUrl={imgUrl} />

    <div class={cx('flex', 'w-full')}>
      <ul
        class={cx(
          'container',
          'mx-auto',
          'block',
          'columns-1',
          'md:columns-2',
          'xl:columns-3',
        )}
      >
        {
          articles.map(
            ({ title, date, url, draft, minImgUrl, imgDescription }) => (
              <li>
                <Card
                  {...{ title, date, url, draft, minImgUrl, imgDescription }}
                />
              </li>
            ),
          )
        }
      </ul>
    </div>
  </body>
</html>
