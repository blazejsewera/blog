---
import { Article, toArticleInfo } from '../components/article/articleInfo'
import { defaultAuthor, defaultLicense } from '../components/const/meta'
import Footer from '../components/section/Footer.astro'
import Listing from '../layouts/Listing.astro'

const articles = await Astro.glob('./*.md')
const filtered = articles.filter(
  ({ frontmatter }) => !!frontmatter.title && !!frontmatter.date,
) as Article[]
---

<Listing
  articles={filtered.map(toArticleInfo)}
  title="Blazej Seweraâ€™s technical blog"
  description=""
  imgUrl="/image/nordic-sky.jpg"
  imgDescription="Nordic sky"
/>
<Footer
  author={defaultAuthor}
  license={defaultLicense}
  year={new Date().getFullYear().toString()}
/>

<script>
  import {
    menuId,
    closeMenuId,
    menuVisibleCx,
    menuInvisibleCx,
  } from '../components/navigation/Menu'

  const closeMenu = document.getElementById(closeMenuId)
  const menu = document.getElementById(menuId)

  closeMenu?.addEventListener('click', () => {
    menu?.classList.remove(...menuVisibleCx)
    menu?.classList.add(...menuInvisibleCx)
  })
</script>

<style>
  a {
    text-decoration: none;
    color: #333;
  }
</style>
